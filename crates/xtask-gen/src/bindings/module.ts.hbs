/*! Auto-generated by xtask-gen. DO NOT EDIT! */

{{#if events}}
import { invoke } from "@tauri-apps/api/core";
{{/if}}
{{#if commands}}
import * as tauriEvent from "@tauri-apps/api/event";
{{/if}}

// =============================================================================
// Types
// =============================================================================

{{#each types}}
{{this}}
{{#unless @last}}

{{/unless}}
{{/each}}

{{#if events}}
// =============================================================================
// Events
// =============================================================================

function makeEvent<T>(name: string) {
  return {
    /** The name of the event. */
    name,
    /** Listen for the event. */
    listen: (cb: tauriEvent.EventCallback<T>, options?: tauriEvent.Options) =>
      tauriEvent.listen(name, cb, options),
    /** Listen once for the event. */
    once: (cb: tauriEvent.EventCallback<T>, options?: tauriEvent.Options) =>
      tauriEvent.once(name, cb, options),
    /** Emit the event to all targets. */
    emit: (payload: T) => tauriEvent.emit(name, payload),
    /** Emit the event to a specific Deskulpt window. */
    emitTo: (window: DeskulptWindow, payload: T) =>
      tauriEvent.emitTo(window, name, payload),
  };
}

export const events = {
{{#each events}}
  {{this.key}}: makeEvent<{{this.ty}}>("{{../namespace}}://{{this.name}}"),
{{/each}}
};
{{/if}}

{{#if commands}}
// =============================================================================
// Commands
// =============================================================================

export const commands = {
{{#each commands}}
{{indent this.doc 2}}
  {{this.key}}: ({{#if this.args}}
{{#each this.args}}
    {{this.name}}: {{this.ty}},
{{/each}}
  {{/if}}) => invoke<{{this.ret_ty}}>("plugin:{{../namespace}}|{{this.name}}"{{#if this.args}}, {
{{#each this.args}}
    {{this.name}},
{{/each}}
  }{{/if}}),
{{#unless @last}}

{{/unless}}
{{/each}}
};
{{/if}}
